<div class="display-flex">
	<div class="content-notes margin-auto">
		<div class="margin-t10 margin-t50 padding-b50">
			<div class="position-relative background-white border-radius-12 padding-25 margin-b10">
				<?php if(!empty($TEMP['#notes'])){ ?>
                <div class="display-block-desk position-absolute pos-top pos-right margin-t10 margin-r10">
                    <a href="{$url->{notes?screen={#screen}&period={#period_id}}}<?php echo($TEMP["#type"] == "course" && ($TEMP["#academic"] === true || $TEMP["#admin"] === true)) ? "&keyword={#keyword_notes}&user={#user_id}" : ""; echo($TEMP["#type"] == "student") ? "&keyword={#keyword_notes}&program={#program_id}" : "&type={#type}&course_id={#course_id}"; echo(($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) && $TEMP["#type"] == "student") ? "&user={#user_id}": "" ;?>" target="_self" class="<?php echo($TEMP['#screen'] == 'oneforone') ? 'color-blud' : 'color-grey';?>">
                    	<svg transform="rotate(-90)" x="0" y="-15" class="dv-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
			                <path fill="currentColor" d="M 8.143 16.431 L 8.143 18.477 C 8.143 18.762 8.05 19.003 7.862 19.202 C 7.674 19.4 7.446 19.5 7.178 19.5 L 3.965 19.5 C 3.697 19.5 3.469 19.4 3.282 19.202 C 3.094 19.003 3 18.762 3 18.477 L 3 16.431 C 3 16.147 3.094 15.906 3.282 15.707 C 3.469 15.509 3.697 15.409 3.965 15.409 L 7.178 15.409 C 7.446 15.409 7.674 15.509 7.862 15.707 C 8.05 15.906 8.143 16.147 8.143 16.431 Z M 8.143 10.977 L 8.143 13.023 C 8.143 13.307 8.05 13.548 7.862 13.747 C 7.674 13.946 7.446 14.045 7.178 14.045 L 3.965 14.045 C 3.697 14.045 3.469 13.946 3.282 13.747 C 3.094 13.548 3 13.307 3 13.023 L 3 10.977 C 3 10.693 3.094 10.452 3.282 10.252 C 3.469 10.054 3.697 9.955 3.965 9.955 L 7.178 9.955 C 7.446 9.955 7.674 10.054 7.862 10.252 C 8.05 10.452 8.143 10.693 8.143 10.977 Z M 21 16.431 L 21 18.477 C 21 18.762 20.906 19.003 20.718 19.202 C 20.531 19.4 20.303 19.5 20.035 19.5 L 10.393 19.5 C 10.125 19.5 9.897 19.4 9.71 19.202 C 9.522 19.003 9.428 18.762 9.428 18.477 L 9.428 16.431 C 9.428 16.147 9.522 15.906 9.71 15.707 C 9.897 15.509 10.125 15.409 10.393 15.409 L 20.035 15.409 C 20.303 15.409 20.531 15.509 20.718 15.707 C 20.906 15.906 21 16.147 21 16.431 Z M 8.143 5.523 L 8.143 7.569 C 8.143 7.852 8.05 8.094 7.862 8.293 C 7.674 8.491 7.446 8.591 7.178 8.591 L 3.965 8.591 C 3.697 8.591 3.469 8.491 3.282 8.293 C 3.094 8.094 3 7.852 3 7.569 L 3 5.523 C 3 5.238 3.094 4.997 3.282 4.798 C 3.469 4.6 3.697 4.5 3.965 4.5 L 7.178 4.5 C 7.446 4.5 7.674 4.6 7.862 4.798 C 8.05 4.997 8.143 5.238 8.143 5.523 Z M 21 10.977 L 21 13.023 C 21 13.307 20.906 13.548 20.718 13.747 C 20.531 13.946 20.303 14.045 20.035 14.045 L 10.393 14.045 C 10.125 14.045 9.897 13.946 9.71 13.747 C 9.522 13.548 9.428 13.307 9.428 13.023 L 9.428 10.977 C 9.428 10.693 9.522 10.452 9.71 10.252 C 9.897 10.054 10.125 9.955 10.393 9.955 L 20.035 9.955 C 20.303 9.955 20.531 10.054 20.718 10.252 C 20.906 10.452 21 10.693 21 10.977 Z M 21 5.523 L 21 7.569 C 21 7.852 20.906 8.094 20.718 8.293 C 20.531 8.491 20.303 8.591 20.035 8.591 L 10.393 8.591 C 10.125 8.591 9.897 8.491 9.71 8.293 C 9.522 8.094 9.428 7.852 9.428 7.569 L 9.428 5.523 C 9.428 5.238 9.522 4.997 9.71 4.798 C 9.897 4.6 10.125 4.5 10.393 4.5 L 20.035 4.5 C 20.303 4.5 20.531 4.6 20.718 4.798 C 20.906 4.997 21 5.238 21 5.523 Z"></path>
			            </svg>
                    </a>
                </div>
                <?php } ?>
				<?php if($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) { ?>
				<label class="color-black">{$word->type}</label>
			    <div class="content-types position-relative margin-b10">
			    	<select id="type" class="cont-input mw-w-200 h-50 margin-left-auto border-radius-12 animated-easy border-focus-blue caret-down background-grely color-black">
			            <option value="student"<?php echo($TEMP['#type'] == 'student') ? ' selected' : '';?>>{$word->student}</option>
			            <option value="course"<?php echo($TEMP['#type'] == 'course') ? ' selected' : '';?>>{$word->course}</option>
			        </select>
			    </div>
			    <?php if($TEMP['#type'] == 'student' || $TEMP['#academic'] === true || $TEMP['#admin'] === true){ ?>
				<label class="color-black">{$word->search}</label>
				<div class="content-search position-relative margin-b10">
					<div class="display-flex margin-auto border-radius-4">
				        <input class="background-grely padding-10 border-focus-blue border-all border-grey border-top-left-radius border-top-right-radius w-100 color-black" type="text" id="search-users" name="keyword" autocomplete="off" value="{#keyword_notes}"> 
				        <div class="content-spinner-circle">
                            <div class="content-spinner-circle">
                                <div class="spinner-circle"></div>
                            </div>
                        </div>
				    </div>
			        <div class="search-down w-100 z-index-first position-absolute background-white"></div>
			    </div>
			    <?php } ?>
			    <?php if($TEMP['#type'] == 'course' && (!empty($TEMP['#keyword_notes']) || $TEMP['#teacher'] === true)){ ?>
			    <label class="color-black">{$word->courses}</label>
			    <div class="content-types position-relative margin-b10">
			        <select id="courses" class="cont-input mw-w-200 h-50 margin-left-auto border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			        	<option selected disabled>{$word->select_course}</option>
			            <?php foreach ($TEMP['#courses'] as $key => $value) {?>
			            <option value="<?php echo $value['id'];?>"<?php echo($value['id'] == $TEMP['#course_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			            <?php } ?>
			        </select>
			    </div>
			    <?php } ?>
				<?php } ?>
			</div>
			<?php if(count($TEMP['#programs']) > 1 && $TEMP['#type'] == 'student'){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
					<div class="group-validate display-block position-relative w-100 padding-5">
			            <div class="display-flex flex-wrap">
			                <div class="cont-label dv-vertical-center">
			                    <label class="color-black">{$word->program}</label>
			                </div>
			                <div class="flex-grow">
			                    <select id="programs" class="cont-input mw-w-200 h-50 margin-left-auto border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			                        <?php foreach ($TEMP['#programs'] as $key => $value) {?>
			                        <option value="<?php echo $value['id'];?>"<?php echo($value['id'] == $TEMP['#program_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			                        <?php } ?>
			                    </select>
			                    <div class="color-red text-left text-error font-low margin-t5"></div>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
			<?php } ?>
			<?php if($TEMP['#teacher'] == false && $TEMP['#type'] == 'student'){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
					<div id="text-average" class="font-medium color-black">{$word->semester_average}</div>
					<button id="average" class="btn-noway font-supraly font-bold" data-type="total">
                        <span class="<?php echo($TEMP['#semesbad'] == true || $TEMP['average'] < $TEMP['#nmcs']) ? 'color-red' : 'color-green';?>">{$average}</span>
                        <div class="content-spinner-circle">
                            <div class="spinner-circle"></div>
                        </div>
                    </button>
	                <?php if($TEMP['#semesbad'] == true && $TEMP['#student'] === true){ ?>
	                <a class="position-absolute" href="{$url->{rules}}?article=64" target="_blank">
	                    <svg class="dv-xs" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
	                        <path d="M13,17h-2v-6h2V17z M13,7h-2v2h2V7z M12,3c-4.96,0-9,4.04-9,9s4.04,9,9,9c4.96,0,9-4.04,9-9S16.96,3,12,3 M12,2 c5.52,0,10,4.48,10,10s-4.48,10-10,10C6.48,22,2,17.52,2,12S6.48,2,12,2L12,2z"></path>
	                    </svg>
	                </a>
	                <?php } ?>
                    <?php if($TEMP['#semesbad'] == true && $TEMP['#student'] === true){ ?>
                    <div class="font-medium font-bold color-red">{$word->you_missed_more_subjects}</div>
                    <?php } ?>
				</div>
			</div>
			<?php } ?>
			<?php if(count($TEMP['#periods']) > 1){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
			        <div class="group-validate display-block position-relative w-100 padding-5">
			            <div class="display-flex flex-wrap">
			                <div class="cont-label dv-vertical-center">
			                    <label class="color-black">{$word->period}</label>
			                </div>
			                <div class="flex-grow">
			                    <select id="periods" class="cont-input mw-w-200 h-50 margin-left-auto border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			                        <?php foreach ($TEMP['#periods'] as $key => $value) {?>
			                        <option value="<?php echo $value['id'];?>"<?php echo($value['id'] == $TEMP['#period_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			                        <?php } ?>
			                    </select>
			                    <div class="color-red text-left text-error font-low margin-t5"></div>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
			<?php } ?>
	   	    <div class="background-white border-radius-12 padding-25">
			    <div class="{#twoforone_content}max-w-900 border-top-left-radius border-top-right-radius">
			    	{$notes}
			    </div>
			</div>
		</div>
		<div class="clear"></div>
	</div>
</div>
<div class="content-modal" id="alert-notes">
    <div class="cont-dialog">
        <div class="cont-popup background-white">
            <div class="top-header dv-vertical-center">
                <div class="padding-t15 padding-b15 w-100 font-lowly color-black">
                    {$word->notes}
                </div>
                <?php if($TEMP['#student'] == true){ ?>
                <button id="cancel-nalert" class="close-popup color-grey btn-noway">
                  <svg class="dv-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                     <path fill="currentColor" d="M 12 13.17 L 5.17 20 L 4 18.832 L 10.83 12 L 4 5.17 L 5.17 4 L 12 10.83 L 18.832 4 L 20 5.17 L 13.17 12 L 20 18.832 L 18.832 20 Z"></path>
                  </svg>
                </button>
                <?php } ?>
            </div>
            <div class="content-modal-body color-grey">
                <div id="container-parameters"></div>
            </div>
            <?php if($TEMP['#student'] == false){ ?>
            <div class="display-flex">
                <div class="margin-left-auto margin-r25 margin-b15">
                    <button class="btn-noway background-grely border-radius-4 padding-10 color-black hover-button font-uppercase" id="cancel-nalert">{$word->cancel}</button>
                    <button class="btn-noway background-blue border-radius-4 padding-10 color-black hover-opacity font-uppercase" id="this-note">
                        <span class="color-white">{$word->save}</span>
                        <div class="content-spinner-circle">
                            <div class="spinner-circle"></div>
                        </div>
                    </button>
                </div>
            </div>
            <?php } ?>
        </div>
    </div>
</div>
<div class="background-pointer"></div>
<div class="cont-alert" id="alert-qualifications">
   	<h2 class="no-margin color-red">{$word->important}</h2>
   	<p id="text-qualification" class="margin-t15">{$word->all_information_will_sent_then_will_contact}</p>
   	<div class="padding-t25">
      	<button id="cancel-qalert" class="btn-noway background-red border-radius-4 padding-10 color-white hover-button font-uppercase">{$word->cancel}</button>
        <button id="request-qualification" class="btn-noway background-blue border-radius-4 padding-10 color-black hover-opacity font-uppercase">
            <span class="color-white">{$word->request}</span>
            <div class="content-spinner-circle">
                <div class="spinner-circle"></div>
            </div>
        </button>
        <a id="link-qualification" class="position-relative background-blue border-radius-4 padding-lr20 padding-10 color-black hover-opacity font-uppercase hidden" href="{$url->{settings}}" target="_blank">
            <span class="color-white">{$word->go}</span>
            <div class="content-spinner-circle">
                <div class="spinner-circle"></div>
            </div>
        </a>
   	</div>
</div>
<div class="background-pointer"></div>
<div class="cont-alert" id="alert-npopup">
   	<h2 class="no-margin color-red">{$word->important}</h2>
   	<?php if($TEMP['#teacher'] === true){ ?>
   	<p class="margin-t15">{$word->you_cant_upload_ratings_yet} <a class="color-blue" href="{$url->{courses}}" target="_blank">{$word->here}</a>.</p>
   	<?php } else { ?>
   	<p class="margin-t15">{$word->you_cant_upload_grades_because_teacher}</p>
	<?php } ?>
   	<div class="padding-t25">
      	<button id="close-npalert" class="btn-noway background-red border-radius-4 padding-10 color-white hover-button font-uppercase">{$word->close}</button>
   	</div>
</div>
<div class="background-pointer"></div>
<div class="cont-alert" id="alert-qpopup">
   	<h2 class="no-margin color-red">{$word->important}</h2>
   	<p class="margin-t15">{$word->can_enable_course_if_request_such_authorization}</p>
   	<div class="padding-t25">
      	<button id="close-qpalert" class="btn-noway background-red border-radius-4 padding-10 color-white hover-button font-uppercase">{$word->close}</button>
   	</div>
</div>
<div class="background-pointer"></div>
<script type="text/javascript">
var NW = D.querySelectorAll('.number'),
	NR = D.querySelectorAll('.request_qualification'),
	NM = D.querySelectorAll('.upload_qualification'),
	NF = D.querySelectorAll('.upload_qnote'),
	NJ = D.querySelectorAll('.clear_note'),
	Nh = D.querySelectorAll('.upload_observation'),
	Nj = D.querySelectorAll('.clear_observation'),
	Ni = D.querySelectorAll('.observation-input'),
	Nx = D.querySelectorAll('.show_observation'),
	NU = D.querySelectorAll('.upload_note'),
    NZ = D.querySelectorAll('.see_params'),
	NS = D.querySelectorAll('.show_npopalert'),
	NQ = D.querySelectorAll('.show_qpopalert'),
	NY = D.querySelector('#alert-npopup'),
	NG = D.querySelector('#alert-qpopup'),
	NO = D.querySelector('#alert-qualifications'),
	NN = D.querySelector('#alert-notes'),
	NT = D.querySelector('#this-note'),
	NB = D.querySelector('#request-qualification'),
	NX = D.querySelector('#link-qualification'),
	NK = D.querySelector('#container-parameters'),
	NP = D.querySelector('#periods'),
	NC = D.querySelector('#text-qualification'),
	Nq = D.querySelector('#type'),
	Nw = D.querySelector('#courses'),
    Nk = D.querySelector('#average'),
    Nz = D.querySelector('#text-average'),
    NA = function(){
        var self = this,
            note_id = self.getAttribute('data-id'),
            pos = self.getAttribute('data-pos');
        <?php if($TEMP['#student'] == false){ ?>self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');<?php } ?>
        Req('{$url->{req/rol-{#role}/get-citems}}', function(e){
            if(e.status == 200){
                for(var j = 0, i = e.items['parameters'].length; j < i; j++){
                    var el = e.items['parameters'][j],
                        element = D.createElement('div');
                    element.className = 'group-validate display-block position-relative w-100 padding-25 border-all border-blue margin-b20', element.id = "parameter_"+j, element.innerHTML = '<h3 class="text-center" id="text-parameter">'+el['name']+'</h3><div class="display-flex"><div class="margin-auto margin-b15 margin-t15 padding-r10"><input id="param_note_'+j+'" type="text" class="cont-input h-50 border-radius-12 animated-easy border-focus-blue background-grely color-black"<?php echo($TEMP["#student"] == true) ? ' readonly="true" ' : ' ';?>placeholder="{$word->note}" '+(e.items['notes'][j] != 0 && e.items['notes'][j] != undefined ? 'value="'+e.items['notes'][j]+'"' : '')+'/></div><div class="position-relative margin-auto margin-b15 margin-t15 percent-gadget percent-gadget-disabled"><input type="text" readonly="true" class="cont-input mw-w-100 h-50 border-radius-12 animated-easy border-focus-blue margin-left-auto background-grely color-black text-center" placeholder="{$word->percentage}" value="'+el['percent']+'"/></div></div><div class="text-error color-red text-center font-low margin-t5"></div>', NK.appendChild(element);
                    var input = element.querySelector('#param_note_'+j);
                    addEvent(input, 'input', function(){
                    	var self = this,
                    		num = self.value.split(''),
                    		doc = [];
                    	if(num.length > 1 && num[1] != '.'){
                    		var num2 = parseFloat(num[0]+'.'+num[1]);
                    		if(num2 > 5) {
                    			self.value = 5;
                    		} else {
                    			self.value = num2;
                    		}
                    	} else if(num.length > 2){
                    		for(var i = 0; i < self.value.length; i++) if(self.value[i] === ".") doc.push(i);
                    		if(doc.length > 1) self.value = 0;
                    	} else if(num[0] > 5){
                    		self.value = 5;
                    	}
                    }), addEvent(input, 'input', function(){
					    this.value = this.value.replace(/[^0-9.]/gi, '');
					}), timeDelay(function(){
						input.value == "" && input.focus();
					}, 100);

                }
                NN.style.display = "block", D.body.style.overflow = "hidden"<?php if($TEMP['#student'] == false){ ?><?php echo($TEMP['#note_mode'] == '30-30-40') ? ", NT.setAttribute('data-pos', pos)" : "";?>, NT.setAttribute('data-id', note_id), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');<?php } ?>
            } else {
                loadAlert(e.error, 1), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
            }
        }, "POST", "&type=notes&id=" + note_id + "&pos=" + pos + "&period_id=<?php echo(count($TEMP['#periods']) > 1) ? '" + NP.value' : '{#period_id}"';?>)
    },
    GW = function(){
    	var self = this,
    		el = NY.querySelector('p'),
    		type = self.getAttribute('data-type');
    	NY.style.display = "block", D.body.style.overflow = "hidden", el.innerHTML = '{$word->you_cant_upload_ratings_yet} <a class="color-blue" href="{$url->{courses}}" target="_blank">{$word->here}</a>.';
    	if(type == 'auth') el.innerHTML = '{$word->can_upload_notes_however_before_uploading_notes} <a class="color-blue" href="{$url->{authorizations}}" target="_blank">{$word->here}</a>.';
    },
    NH = function(){
    	NG.style.display = "block", D.body.style.overflow = "hidden";
    },
    ND = function(){
    	var self = this,
    		note_id = self.getAttribute('data-id');
    	self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');
	    Req('{$url->{req/rol-student/get-settings}}', function(e){
	        if(e.status == 200){
	        	if(e.cell == null){
	        		NC.innerText = '{$word->first_have_fill_information}', removeClass(NX, 'hidden'), addClass(NB, 'hidden');
	        	} else {
	        		NC.innerText = "{$word->all_information_will_sent_then_will_contact}", addClass(NX, 'hidden'), removeClass(NB, 'hidden');
	        	}
	            NO.style.display = "block", D.body.style.overflow = "hidden", NB.setAttribute('data-id', note_id), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
	        } else {
	        	loadAlert(e.error, 1), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
	    	}
	    }, "POST", "&id={$me->id}&note_id=" + note_id)
    },
	keyword = "{#keyword_notes}";

<?php if($TEMP['#type'] == 'course' && (!empty($TEMP['#keyword_notes']) || $TEMP['#teacher'] === true)){ ?>
addEvent(Nw, 'change', function(){
    preloadPage('&one=notes&screen={#url_screen}<?php echo($TEMP["#academic"] === true || $TEMP["#admin"] === true) ? "&keyword={#keyword_notes}&user={#user_id}" : "";?>&type={#type}&course_id=' + this.value);
})
<?php } ?>

<?php if($TEMP['#teacher'] == false && $TEMP['#type'] == 'student'){ ?>
doubleClick(Nk, function(e){
    var type = e.getAttribute('data-type'),
    	Ng = Nk.querySelector('span');
    Nk.setAttribute('disabled', true), addClass(Nk, 'spinner-is-loading');
    Req('{$url->{req/rol-student/reload-average}}', function(e){
        if(e.status == 200){
        	if(type == 'total'){
            	Nz.innerText = "{$word->total_average}", Nk.setAttribute('data-type', 'semester'), removeClass(Ng, 'color-red'), removeClass(Ng, 'color-green');;
        	} else {
        		if(e.semesbad != 'none'){
        			if(e.semesbad == 'true'){
        				addClass(Ng, 'color-red'), removeClass(Ng, 'color-green');
        			} else {
        				addClass(Ng, 'color-green'), removeClass(Ng, 'color-red');
        			}
        		}
        		Nz.innerText = "{$word->semester_average}", Nk.setAttribute('data-type', 'total');
        	}
        	Ng.innerText = e.average, Nk.removeAttribute('disabled'), removeClass(Nk, 'spinner-is-loading');
        } else {
            loadAlert(e.error, 1), Nk.removeAttribute('disabled'), removeClass(Nk, 'spinner-is-loading');
        }
    }, "POST", "&id={#user_id}&period_id={#period_id}&program_id={#program_id}&typet=" + type)
});

<?php } ?>

<?php if(count($TEMP['#programs']) > 1 && $TEMP['#type'] == 'student'){ ?>
addEvent(D.querySelector('#programs'), 'change', function(){
    preloadPage('&one=notes&screen={#url_screen}&keyword={#keyword_notes}<?php echo($TEMP["#admin"] == true || $TEMP["#academic"] == true || $TEMP["#teacher"] == true) ? "&user={#user_id}" : "" ;?>&program='+this.value);
}), <?php } if(count($TEMP['#periods']) > 1){ ?>addEvent(NP, 'change', function(){
    preloadPage('&one=notes&screen={#url_screen}<?php echo($TEMP["#type"] == "course" && ($TEMP["#academic"] === true || $TEMP["#admin"] === true)) ? "&keyword={#keyword_notes}&user={#user_id}": ""; echo($TEMP["#type"] == "student") ? "&keyword={#keyword_notes}&program={#program_id}" : "&type={#type}&course_id={#course_id}"; echo(($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) && $TEMP["#type"] == "student") ? "&user={#user_id}" : "" ;?>&period='+this.value);
})
<?php } ?>
addEvent(D.querySelector('#close-qpalert'), 'click', function(){
    NG.style.display = "", D.body.style.overflow = "";
}), addEvent(D.querySelector('#cancel-nalert'), 'click', function(){
    NN.style.display = "", D.body.style.overflow = "", NK.innerHTML = "";
}), addEvent(D.querySelector('#cancel-qalert'), 'click', function(){
    NO.style.display = "", D.body.style.overflow = "";
});
<?php if($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) { ?>
addEvent(Nq, 'change', function(){
    preloadPage('&one=notes&screen={#url_screen}&type=' + this.value);
})
<?php if(!empty($TEMP['#notes'])){ ?>
addEvent(NT, 'click', function(){
    var self = this,
        GO = [],
        sum = 0,
        GC = NK.children,
        note_id = self.getAttribute('data-id'),
        pos = self.getAttribute("data-pos");
    for (var j = 0, i = GC.length; j < i; j++){
        var el = D.querySelector('#param_note_'+j),
            GZ = D.querySelector('#parameter_'+j);
        if(el.value == '' || el.value > 5 || el.value < 0){
            addClass(el, 'border-red'), addClass(el, 'boxshadow-red');
            GZ.querySelector('.text-error').innerText = (el.value == '' ? '*{$word->this_field_is_empty}' : (el.value < 5 ? '{$word->please_enter_valid_value}' : '{$word->the_maximum_grade_is}')), timeDelay(function(){
                addClass(NN, 'efect-boom'), timeDelay(function(){
                    removeClass(NN, 'efect-boom')
                }, 200)
            }, 700);
            if(GC[GC.length-1] == GZ) return false;
        } else {
            removeClass(el, 'border-red'), removeClass(el, 'boxshadow-red'), GZ.querySelector('.text-error').innerText = "", GO.push(el.value);
        }
    }
    NT.setAttribute('disabled', true), addClass(NT, 'spinner-is-loading');
    Req('{$url->{req/rol-teacher/this-notes}}', function(e){
        if(e.status == 200){
        	var GV = D.querySelector('#scroll-' + note_id),
        		GQ = GV.querySelector('.cont-table-header'),
        		GJ = GV.querySelector('.status'),
        		GM = GV.querySelector('.average');
            NN.style.display = "", D.body.style.overflow = "", NK.innerHTML = "", loadAlert("{$word->note_updated_successfully}"), NT.removeAttribute('disabled'), removeClass(NT, 'spinner-is-loading'), Nk && (Nk.innerText = e.average);
            if(Nk){
	            if(e.semesbad == 'true'){
	            	addClass(Nk, 'color-red'), removeClass(Nk, 'color-green');
	            } else {
	            	removeClass(Nk, 'color-red'), addClass(Nk, 'color-green');
	            }
	        }
            if(e.background == 'true'){
	        	removeClass(GJ, 'background-red'), removeClass(GV, 'border-red'), removeClass(GQ, 'border-red'), addClass(GJ, 'background-green'), addClass(GV, 'border-blue'), addClass(GQ, 'border-blue');
	        } else {
            	addClass(GJ, 'background-red'), addClass(GV, 'border-red'), addClass(GQ, 'border-red'), removeClass(GJ, 'background-green'), removeClass(GV, 'border-blue'), removeClass(GQ, 'border-blue');
	        }
            <?php if($TEMP['#note_mode'] == '30-30-40'){ ?>
            var GP = D.querySelector('.upload_note[data-pos="2"][data-id="' + note_id + '"]'),
           		el = GP.parentNode,
            	GX = el.querySelector('a');
            if(e.last_eval == 'true'){
            	GP.removeAttribute('disabled'), removeClass(GP, 'cursor-disabled'), GX && addClass(GX, 'hidden');
            	if(e.third > 0){
            		GP.innerText = e.third;
            	}
            } else {
            	var element = D.createElement('a');
            	addClass(element, 'position-absolute'), element.href = "{$url->{rules?article=42}}", element. setAttribute('target', '_blank'), element.innerHTML = '<svg class="dv-xs" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13,17h-2v-6h2V17z M13,7h-2v2h2V7z M12,3c-4.96,0-9,4.04-9,9s4.04,9,9,9c4.96,0,9-4.04,9-9S16.96,3,12,3 M12,2 c5.52,0,10,4.48,10,10s-4.48,10-10,10C6.48,22,2,17.52,2,12S6.48,2,12,2L12,2z"></path></svg>';
            	GP.setAttribute('disabled', true), addClass(GP, 'cursor-disabled'), (GX ? removeClass(GX, 'hidden') : el.appendChild(element)), GP.innerText = "{$word->upload_note}";
            }
            if(e.evalfinal == 'false'){
            	if(e.last_eval == 'false'){
            		GM.innerHTML = 0+'<a class="position-absolute" href="{$url->{rules?article=43}}" target="_blank"><svg class="dv-xs" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13,17h-2v-6h2V17z M13,7h-2v2h2V7z M12,3c-4.96,0-9,4.04-9,9s4.04,9,9,9c4.96,0,9-4.04,9-9S16.96,3,12,3 M12,2 c5.52,0,10,4.48,10,10s-4.48,10-10,10C6.48,22,2,17.52,2,12S6.48,2,12,2L12,2z"></path></svg></a>';
            	} else {
            		if(e.approved == 'false'){
            			GM.innerHTML = e.ave+'<a class="position-absolute" href="{$url->{rules?article=43}}" target="_blank"><svg class="dv-xs" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M13,17h-2v-6h2V17z M13,7h-2v2h2V7z M12,3c-4.96,0-9,4.04-9,9s4.04,9,9,9c4.96,0,9-4.04,9-9S16.96,3,12,3 M12,2 c5.52,0,10,4.48,10,10s-4.48,10-10,10C6.48,22,2,17.52,2,12S6.48,2,12,2L12,2z"></path></svg></a>';
            		} else {
            			GM.innerHTML = e.ave
            		}
            	}
            } else {
            	GM.innerText = e.ave
            }
            D.querySelector('.upload_note[data-pos="' + pos + '"][data-id="' + note_id + '"]').innerText = e.note
            <?php } else { ?>
            D.querySelector('.upload_note[data-id="' + note_id + '"]').innerText = e.note
            <?php } ?>
        } else {
            if (e.errors != undefined) {
                for (var j = 0, i = e.errors.length; j < i; j++){
                    var el = D.querySelector('#'+e.errors[j]['class']+e.errors[j]['id']),
                        GH = D.querySelector('#parameter_'+e.errors[j]['id']);
                    addClass(el, 'border-red'), addClass(el, 'boxshadow-red'), GH.querySelector('.text-error').innerText = '*{$word->please_enter_valid_value}', timeDelay(function(){
                        addClass(NN, 'efect-boom'), timeDelay(function(){
                            removeClass(NN, 'efect-boom')
                        }, 200)
                    }, 700);
                }
            } else if(e.emptys != undefined){
                for (var j = 0, i = e.emptys.length; j < i; j++){
                    var el = D.querySelector('#'+e.emptys[j]['class']+e.emptys[j]['id']),
                        GZ = D.querySelector('#parameter_'+e.emptys[j]['id']);
                    GZ.querySelector('.text-error').innerText = '*{$word->this_field_is_empty}', addClass(el, 'border-red'), addClass(el, 'boxshadow-red'), timeDelay(function(){
                            addClass(NN, 'efect-boom'), timeDelay(function(){
                                removeClass(NN, 'efect-boom')
                            }, 200)
                        }, 700);
                }
            } else {
                loadAlert(e.error, 1)
            }
            NT.removeAttribute('disabled'), removeClass(NT, 'spinner-is-loading');
        }
    }, "POST", "&id=" + note_id + "&params=" + JSON.stringify(GO)<?php echo($TEMP['#note_mode'] == '30-30-40') ? ' + "&pos=" + pos' : '';?>)
}), <?php } ?><?php if($TEMP['#type'] == 'student' || $TEMP['#academic'] === true || $TEMP['#admin'] === true){ ?>addEvent(D.querySelector('#search-users'), "input", function(e){
	let self = this,
		SV = self.value,
		SQ = self.parentNode,
		SD = D.querySelector('.search-down');
	if (SV == '') {
		addClass(SD, 'hidden');
		SD.innerHTML = "";
		return false;
	} else if(e.which != 13 || e.keyCode != 13){
		removeClass(SD, 'hidden');
	}
	addClass(SQ, 'spinner-is-loading'), keyword = SV;
	Req('{$url->{req/rol-teacher/search-users}}', function(e) {
	    if (e.status == 200) {
	   		removeClass(SQ, 'spinner-is-loading'), removeClass(SD, 'border-left'), removeClass(SD, 'border-right'), removeClass(SD, 'border-bottom'), removeClass(SD, 'border-grey'), removeClass(SD, 'padding-10'), removeClass(SD, 'border-bottom-left-radius'), removeClass(SD, 'border-bottom-right-radius'), SD.innerHTML = e.html, loadPage(SD.querySelectorAll('a[target="_self"]'));
	    } else {
		    removeClass(SQ, 'spinner-is-loading'), addClass(SD, 'border-left'), addClass(SD, 'border-right'), addClass(SD, 'border-bottom'), addClass(SD, 'border-grey'), addClass(SD, 'padding-10'), addClass(SD, 'border-bottom-left-radius'), addClass(SD, 'border-bottom-right-radius'), SD.innerHTML = e.html;
		   	return false;
	    }
	}, "POST", "&typet=<?php echo($TEMP['#type'] == 'student') ? 'notes' : 'teachers';?>&screen={#url_screen}&keyword=" + SV);
}), <?php } else{ ?>


<?php } ?>addEvent(D.querySelector('#close-npalert'), 'click', function(){
    NY.style.display = "", D.body.style.overflow = "";
});
for(var j = 0, i = NS.length; j < i; j++) addEvent(NS[j], "click", GW);
for(var j = 0, i = NU.length; j < i; j++) addEvent(NU[j], "click", NA);	
<?php } else { ?>
addEvent(NB, 'click', function(){
    var self = this;
    NB.setAttribute('disabled', true), addClass(NB, 'spinner-is-loading');
    Req('{$url->{req/rol-student/request-qualifications}}', function(e){
        if(e.status == 200){
            NO.style.display = "", loadAlert("{$word->request_sent_successfully}"), preloadPage('{#url_params}');
        } else {
            loadAlert(e.error, 1), NB.removeAttribute('disabled'), removeClass(NB, 'spinner-is-loading');
        }
    }, "POST", "&id={$me->id}&period_id={#period_id}&note_id=" + self.getAttribute('data-id'))
});
for(var j = 0, i = NW.length; j < i; j++) addEvent(NW[j], 'input', function(){
    this.value = this.value.replace(/[^0-9]/gi, '');
});
for(var j = 0, i = NZ.length; j < i; j++) addEvent(NZ[j], "click", NA);
for(var j = 0, i = NR.length; j < i; j++) addEvent(NR[j], "click", ND);
<?php } ?>
for(var j = 0, i = NQ.length; j < i; j++) addEvent(NQ[j], "click", NH);
for(var j = 0, i = NF.length; j < i; j++) addEvent(NF[j], 'click', function(){
	var self = this,
		el = self.parentNode,
		NI = el.parentNode,
		NV = el.querySelector('input'),
		NE = NI.querySelector('.qualification_note'),
		NL = NI.querySelector('.upload_qualification');

	self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');
    Req('{$url->{req/rol-teacher/this-qualification}}', function(e){
        if(e.status == 200){
            NL.innerText = e.note, addClass(NE, 'hidden'), removeClass(NL, 'hidden'), removeClass(NV, 'border-red'), removeClass(NV, 'boxshadow-red'), loadAlert("{$word->note_updated_successfully}"), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
        } else {
            if(e.empty != undefined){
                loadAlert('*{$word->this_field_is_empty}', 1)
            } else {
                loadAlert(e.error, 1)
            }
            addClass(NV, 'border-red'), addClass(NV, 'boxshadow-red'), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
        }
    }, "POST", "&note_id=" + self.getAttribute('data-id') + "&period_id={#period_id}&note=" + NV.value)
});
for(var j = 0, i = NM.length; j < i; j++) doubleClick(NM[j], function(e){
	var el = e.parentNode,
		NL = el.querySelector('.qualification_note'),
		Nl = el.querySelector('a[target="_blank"]');
	removeClass(NL, 'hidden'), addClass(e, 'hidden'), addClass(Nl, 'hidden');
});
for(var j = 0, i = NJ.length; j < i; j++) addEvent(NJ[j], 'click', function(){
	var self = this.parentNode,
		el = self.parentNode,
		NL = el.querySelector('.upload_qualification'),
		Nl = el.querySelector('a[target="_blank"]');
	addClass(self, 'hidden'), removeClass(NL, 'hidden'), removeClass(Nl, 'hidden');
});
<?php if($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) { ?>
for(var j = 0, i = Ni.length; j < i; j++) doubleClick(Ni[j], function(e){
	var el = e.parentNode,
		NL = el.querySelector('textarea'),
		Nl = el.querySelector('b');
	removeClass(el.querySelector('.observation-buttons'), 'hidden'), NL.style.maxHeight = "", removeClass(Nl, 'color-grey'), addClass(NL, 'border-focus-blue'), NL.removeAttribute('readonly');
});
for(var j = 0, i = Nx.length; j < i; j++) addEvent(Nx[j], 'click', function(){
	var self = this,
		type = self.getAttribute('data-type'),
		note_id = self.getAttribute('data-id'),
		el = D.querySelector('#observation-' + note_id),
		Nf = D.querySelector('#scroll-' + note_id),
		NL = el.querySelector('textarea');
	if(type == 'show'){
		self.setAttribute('data-type', 'hide'), removeClass(self, 'rotate-180'), removeClass(el, 'h-0'), removeClass(Nf, 'border-radius-12'), addClass(Nf, 'border-top-left-radius'), addClass(Nf, 'border-top-right-radius'), timeDelay(function(){
			el.style.height = "auto", NL.style.maxHeight = "";
		}, 500)
	} else {
		self.setAttribute('data-type', 'show'), addClass(self, 'rotate-180'), addClass(el.querySelector('.observation-buttons'), 'hidden'), el.style.height = "", NL.style.maxHeight = "100px", addClass(el.querySelector('b'), 'color-grey'), removeClass(NL, 'border-focus-blue'), NL.setAttribute('readonly', true), timeDelay(function(){
			addClass(el, 'h-0'), timeDelay(function(){
				addClass(Nf, 'border-radius-12'), removeClass(Nf, 'border-top-left-radius'), removeClass(Nf, 'border-top-right-radius')
			}, 300);
		}, 100)
	}
});
for(var j = 0, i = Nh.length; j < i; j++) addEvent(Nh[j], 'click', function(){
	var self = this,
		note_id = self.getAttribute('data-id'),
		el = D.querySelector('#observation-' + note_id),
		Nf = D.querySelector('#scroll-' + note_id),
		Nb = D.querySelector('.show_observation[data-id="' + note_id + '"]'),
		NL = el.querySelector('textarea');

	self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');
    Req('{$url->{req/rol-teacher/upload-observation}}', function(e){
        if(e.status == 200){
        	if(NL.value == ''){
        		Nb.setAttribute('data-type', 'show'), addClass(Nb, 'rotate-180'), el.style.height = "", timeDelay(function(){
					addClass(el, 'h-0'), timeDelay(function(){
						addClass(Nf, 'border-radius-12'), removeClass(Nf, 'border-top-left-radius'), removeClass(Nf, 'border-top-right-radius')
					}, 300);
				}, 100)
        	}

        	addClass(el.querySelector('.observation-buttons'), 'hidden'), NL.style.maxHeight = "100px", addClass(el.querySelector('b'), 'color-grey'), removeClass(NL, 'border-focus-blue'), NL.setAttribute('readonly', true), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
        } else {
            loadAlert(e.error, 1), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
        }
    }, "POST", "&id=" + note_id + "&observation=" + NL.value)
});
for(var j = 0, i = Nj.length; j < i; j++) addEvent(Nj[j], 'click', function(){
	var self = this,
		el = D.querySelector('#observation-' + self.getAttribute('data-id')),
		Nl = el.querySelector('.observation_limit'),
		NL = el.querySelector('textarea');
	el.style.height = "", NL.value = "", NL.innerText = "", Nl.innerText = 500, addClass(Nl, 'color-green'), removeClass(Nl, 'color-orange'), removeClass(Nl, 'color-red'), NL.style.maxHeight = "100px";
});
for(var j = 0, i = Ni.length; j < i; j++) addEvent(Ni[j], 'input', function(){
	var self = this,
		el = self.parentNode,
		Nl = el.querySelector('.observation_limit'),
		maxLength = 500,
		strLength = maxLength-self.value.length;
    Nl.innerText = strLength;
	if(strLength <= 200){
        addClass(Nl, 'color-red'), removeClass(Nl, 'color-orange'), removeClass(Nl, 'color-green');
    } else if(strLength <= 350){
        addClass(Nl, 'color-orange'), removeClass(Nl, 'color-green');
    } else {
    	addClass(Nl, 'color-green'), addClass(Nl, 'color-red'), removeClass(Nl, 'color-orange');
    }
});
<?php } ?>
</script>