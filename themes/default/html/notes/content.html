<div class="display-flex">
	<div class="content-notes margin-auto">
		<div class="margin-t10 margin-t50 padding-b50">
			<?php if($TEMP['#academic'] == true || $TEMP['#teacher'] == true) { ?>
			<div class="background-white border-radius-12 padding-25 margin-b10">
				<label class="color-black">{$word->search}</label>
				<div class="content-search-notes position-relative margin-b10">
					<div class="display-flex margin-auto border-radius-4">
				        <input class="background-grely padding-10 border-focus-blue border-all border-grey border-top-left-radius border-top-right-radius w-100 color-black" type="text" id="search-users" name="keyword" autocomplete="off" value="{#keyword_notes}"> 
				    </div>
			        <div class="search-down w-100 z-index-first position-absolute background-white"></div>
			    </div>
			</div>
			<?php } ?>
			<?php if(count($TEMP['#programs']) > 1){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
					<div class="group-validate display-block position-relative w-100 padding-5">
			            <div class="display-flex flex-wrap">
			                <div class="cont-label dv-vertical-center">
			                    <label class="color-black">{$word->program}</label>
			                </div>
			                <div class="flex-grow">
			                    <select id="programs" class="cont-input h-50 border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			                        <?php foreach ($TEMP['#programs'] as $key => $value) {?>
			                        <option value="<?php echo $value['id'];?>"<?php echo($value['program_id'] == $TEMP['#notes']['program_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			                        <?php } ?>
			                    </select>
			                    <div class="color-red text-left text-error font-low margin-t5"></div>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
			<?php } ?>
			<?php if($TEMP['#teacher'] == false){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
					<div class="font-medium color-black">{$word->global_average}</div>
					<div class="font-supraly font-bold">{$average}</div>
				</div>
			</div>
			<?php } ?>
			<?php if(count($TEMP['#periods']) > 1){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
			        <div class="group-validate display-block position-relative w-100 padding-5">
			            <div class="display-flex flex-wrap">
			                <div class="cont-label dv-vertical-center">
			                    <label class="color-black">{$word->period}</label>
			                </div>
			                <div class="flex-grow">
			                    <select id="periods" class="cont-input h-50 border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			                        <?php foreach ($TEMP['#periods'] as $key => $value) {?>
			                        <option value="<?php echo $value['id'];?>"<?php echo($value['id'] == $TEMP['#period_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			                        <?php } ?>
			                    </select>
			                    <div class="color-red text-left text-error font-low margin-t5"></div>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
			<?php } ?>
	   	    <div class="background-white border-radius-12 padding-25">
			    <div class="max-w-900 border-top-left-radius border-top-right-radius">
			    	{$notes}
			    </div>
			</div>
		</div>
		<div class="clear"></div>
	</div>
</div>
<div class="content-modal" id="alert-programs">
    <div class="cont-dialog">
        <div class="cont-popup background-white">
            <div class="top-header">
                <div class="padding-t15 padding-b15 w-100 font-lowly color-black">
                    {$word->add_new_program}
                </div>
            </div>
            <div class="content-modal-body color-grey">
                <div class="group-validate display-block margin-t15 position-relative w-100 padding-25">
                    <div class="display-flex flex-wrap">
                        <div class="cont-label dv-vertical-center">
                            <label class="color-black">{$word->snies_code}</label>
                        </div>
                        <div class="flex-grow">
                            <input id="snies" type="number" class="cont-input number h-50 border-radius-12 animated-easy border-focus-blue area_validate background-grely color-black" value="{$data->dni}" />
                            <div class="color-red text-left text-error font-low margin-t5"></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="display-flex">
                <div class="margin-left-auto margin-r25 margin-b15">
                    <button class="btn-noway background-grely border-radius-4 padding-10 color-black hover-button font-uppercase" id="cancel-alert">{$word->cancel}</button>
                    <button class="btn-noway background-blue border-radius-4 padding-10 color-black hover-opacity font-uppercase" data-type="add" id="this-program">
                        <span class="color-white">{$word->save}</span>
                        <div class="content-spinner-circle">
                            <div class="spinner-circle"></div>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="background-pointer"></div>
<script type="text/javascript">
var NF = D.querySelectorAll('.upload_note_first'),
	NS = D.querySelectorAll('.upload_note_second'),
	NT = D.querySelectorAll('.upload_note_third'),
	NA = function(){
		GJ.style.display = "block", D.body.style.overflow = "hidden", GI.setAttribute('data-id', this.getAttribute('data-id'));
	},
    NB = function(){
        GE.style.display = "block", D.body.style.overflow = "hidden", GG.setAttribute('data-id', this.getAttribute('data-id'));
    },
    NC = function(){
        GN.style.display = "block", D.body.style.overflow = "hidden", GL.setAttribute('data-id', this.getAttribute('data-id'));
    },
	keyword = "{#keyword_notes}";
<?php if(count($TEMP['#programs']) > 1){ ?>
addEvent(D.querySelector('#programs'), 'change', function(){
    preloadPage('&one=notes<?php echo($TEMP['#academic'] == true || $TEMP['#teacher'] == true) ? "&user={#user_id}" : "" ;?>&program='+this.value);
}), <?php } if(count($TEMP['#periods']) > 1){ ?>addEvent(D.querySelector('#periods'), 'change', function(){
    preloadPage('&one=notes<?php echo($TEMP['#academic'] == true || $TEMP['#teacher'] == true) ? "&user={#user_id}" : "" ;?>&program={#program_id}&period='+this.value);
})
<?php } ?>

<?php if($TEMP['#academic'] == true){ ?>
for(var j = 0, i = NF.length; j < i; j++) addEvent(NF[j], "click", NA);
for(var j = 0, i = NS.length; j < i; j++) addEvent(NS[j], "click", NB);
for(var j = 0, i = NT.length; j < i; j++) addEvent(NT[j], "click", NC);	
<?php if($TEMP['#teacher'] == true) { ?>
addEvent(D.querySelector('#search-users'), "keyup", function(e){
	let SV = this.value,
		SD = D.querySelector('.search-down');
	if (SV == '') {
		addClass(SD, 'hidden');
		SD.innerHTML = "";
		return false;
	} else if(e.which != 13 || e.keyCode != 13){
		removeClass(SD, 'hidden');
	}
	keyword = SV;
	Req('{$url->{req/rol-teacher/search-users}}', function(e) {
		console.log(e);
	    if (e.status == 200) {
	   		SD.innerHTML = e.html, loadPage(SD.querySelectorAll('a[target="_self"]'));
	    } else {
		    addClass(SD, 'hidden');
		   	SD.innerHTML = "";
		   	return false;
	    }
	}, "POST", "&type=notes&keyword=" + SV);
})
<?php } ?>
<?php } ?>
</script>