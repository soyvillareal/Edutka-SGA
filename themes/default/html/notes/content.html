<div class="display-flex">
	<div class="content-notes margin-auto">
		<div class="margin-t10 margin-t50 padding-b50">
			<?php if($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) { ?>
			<div class="background-white border-radius-12 padding-25 margin-b10">
				<label class="color-black">{$word->search}</label>
				<div class="content-search position-relative margin-b10">
					<div class="display-flex margin-auto border-radius-4">
				        <input class="background-grely padding-10 border-focus-blue border-all border-grey border-top-left-radius border-top-right-radius w-100 color-black" type="text" id="search-users" name="keyword" autocomplete="off" value="{#keyword_notes}"> 
				        <div class="content-spinner-circle">
                            <div class="content-spinner-circle">
                                <div class="spinner-circle"></div>
                            </div>
                        </div>
				    </div>
			        <div class="search-down w-100 z-index-first position-absolute background-white"></div>
			    </div>
			</div>
			<?php } ?>
			<?php if(count($TEMP['#programs']) > 1){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
					<div class="group-validate display-block position-relative w-100 padding-5">
			            <div class="display-flex flex-wrap">
			                <div class="cont-label dv-vertical-center">
			                    <label class="color-black">{$word->program}</label>
			                </div>
			                <div class="flex-grow">
			                    <select id="programs" class="cont-input h-50 border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			                        <?php foreach ($TEMP['#programs'] as $key => $value) {?>
			                        <option value="<?php echo $value['id'];?>"<?php echo($value['id'] == $TEMP['#program_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			                        <?php } ?>
			                    </select>
			                    <div class="color-red text-left text-error font-low margin-t5"></div>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
			<?php } ?>
			<?php if($TEMP['#teacher'] == false){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
					<div class="font-medium color-black">{$word->global_average}</div>
					<div class="font-supraly font-bold<?php echo($TEMP['#semesbad'] == true) ? ' color-red' : ''; echo($TEMP['average'] < $TEMP['#nmcs']) ? ' color-red' : ' color-green';?>">{$average}

                    <?php if($TEMP['#semesbad'] == true){ ?>
                    <a class="position-absolute" href="{$url->{rules}}?article=64" target="_blank">
                        <svg class="dv-xs" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13,17h-2v-6h2V17z M13,7h-2v2h2V7z M12,3c-4.96,0-9,4.04-9,9s4.04,9,9,9c4.96,0,9-4.04,9-9S16.96,3,12,3 M12,2 c5.52,0,10,4.48,10,10s-4.48,10-10,10C6.48,22,2,17.52,2,12S6.48,2,12,2L12,2z"></path>
                        </svg>
                    </a>
                    <?php } ?>
                    </div>
                    <?php if($TEMP['#semesbad'] == true){ ?>
                    <div class="font-medium font-bold color-red">{$word->you_missed_more_subjects}</div>
                    <?php } ?>
				</div>
			</div>
			<?php } ?>
			<?php if(count($TEMP['#periods']) > 1){ ?>
			<div class="text-center background-white border-radius-12 padding-25 margin-b10">
				<div class="max-w-900 border-top-left-radius border-top-right-radius">
			        <div class="group-validate display-block position-relative w-100 padding-5">
			            <div class="display-flex flex-wrap">
			                <div class="cont-label dv-vertical-center">
			                    <label class="color-black">{$word->period}</label>
			                </div>
			                <div class="flex-grow">
			                    <select id="periods" class="cont-input h-50 border-radius-12 animated-easy border-focus-blue area_changed caret-down background-grely color-black">
			                        <?php foreach ($TEMP['#periods'] as $key => $value) {?>
			                        <option value="<?php echo $value['id'];?>"<?php echo($value['id'] == $TEMP['#period_id']) ? ' selected' : '';?>><?php echo $value['name']; ?></option>
			                        <?php } ?>
			                    </select>
			                    <div class="color-red text-left text-error font-low margin-t5"></div>
			                </div>
			            </div>
			        </div>
			    </div>
			</div>
			<?php } ?>
	   	    <div class="background-white border-radius-12 padding-25">
			    <div class="max-w-900 border-top-left-radius border-top-right-radius">
			    	{$notes}
			    </div>
			</div>
		</div>
		<div class="clear"></div>
	</div>
</div>
<div class="content-modal" id="alert-notes">
    <div class="cont-dialog">
        <div class="cont-popup background-white">
            <div class="top-header dv-vertical-center">
                <div class="padding-t15 padding-b15 w-100 font-lowly color-black">
                    {$word->notes}
                </div>
                <?php if($TEMP['#student'] == true){ ?>
                <button id="cancel-nalert" class="close-popup color-grey btn-noway">
                  <svg class="dv-icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                     <path fill="currentColor" d="M 12 13.17 L 5.17 20 L 4 18.832 L 10.83 12 L 4 5.17 L 5.17 4 L 12 10.83 L 18.832 4 L 20 5.17 L 13.17 12 L 20 18.832 L 18.832 20 Z"></path>
                  </svg>
                </button>
                <?php } ?>
            </div>
            <div class="content-modal-body color-grey">
                <div id="container-parameters"></div>
            </div>
            <?php if($TEMP['#student'] == false){ ?>
            <div class="display-flex">
                <div class="margin-left-auto margin-r25 margin-b15">
                    <button class="btn-noway background-grely border-radius-4 padding-10 color-black hover-button font-uppercase" id="cancel-nalert">{$word->cancel}</button>
                    <button class="btn-noway background-blue border-radius-4 padding-10 color-black hover-opacity font-uppercase" id="this-note">
                        <span class="color-white">{$word->save}</span>
                        <div class="content-spinner-circle">
                            <div class="spinner-circle"></div>
                        </div>
                    </button>
                </div>
            </div>
            <?php } ?>
        </div>
    </div>
</div>
<div class="background-pointer"></div>
<div class="cont-alert" id="alert-qualifications">
   	<h2 class="no-margin color-red">{$word->important}</h2>
   	<p id="text-qualification" class="margin-t15">Toda su informacion será enviada y luego nos pondremos en contacto con usted mendiante esta misma.</p>
   	<div class="padding-t25">
      	<button id="cancel-qalert" class="btn-noway background-red border-radius-4 padding-10 color-white hover-button font-uppercase">{$word->cancel}</button>
        <button id="request-qualification" class="btn-noway background-blue border-radius-4 padding-10 color-black hover-opacity font-uppercase">
            <span class="color-white">{$word->request}</span>
            <div class="content-spinner-circle">
                <div class="spinner-circle"></div>
            </div>
        </button>
        <a id="link-qualification" class="position-relative background-blue border-radius-4 padding-lr20 padding-10 color-black hover-opacity font-uppercase hidden" href="{$url->{settings}}" target="_blank">
            <span class="color-white">Ir</span>
            <div class="content-spinner-circle">
                <div class="spinner-circle"></div>
            </div>
        </a>
   	</div>
</div>
<div class="background-pointer"></div>
<div class="cont-alert" id="alert-npopup">
   	<h2 class="no-margin color-red">{$word->important}</h2>
   	<?php if($TEMP['#teacher'] === true){ ?>
   	<p class="margin-t15">{$word->you_cant_upload_ratings_yet} <a class="color-blue" href="{$url->{courses}}" target="_blank">{$word->here}</a>.</p>
   	<?php } else { ?>
   	<p class="margin-t15">{$word->you_cant_upload_grades_because_teacher}</p>
	<?php } ?>
   	<div class="padding-t25">
      	<button id="close-npalert" class="btn-noway background-red border-radius-4 padding-10 color-white hover-button font-uppercase">{$word->close}</button>
   	</div>
</div>
<div class="background-pointer"></div>
<div class="cont-alert" id="alert-qpopup">
   	<h2 class="no-margin color-red">{$word->important}</h2>
   	<p class="margin-t15">Usted pude habilitar este curso, puede o no solicitar dicha habilitacion. Si hace esto, se enviaran sus datos y sera contactado.</p>
   	<div class="padding-t25">
      	<button id="close-qpalert" class="btn-noway background-red border-radius-4 padding-10 color-white hover-button font-uppercase">{$word->close}</button>
   	</div>
</div>
<div class="background-pointer"></div>
<script type="text/javascript">
var NW = D.querySelectorAll('.number'),
	NR = D.querySelectorAll('.request_qualification'),
	NM = D.querySelectorAll('.upload_qualification'),
	NF = D.querySelectorAll('.upload_qnote'),
	NJ = D.querySelectorAll('.clear_note'),
	NU = D.querySelectorAll('.upload_note'),
    NZ = D.querySelectorAll('.see_params'),
	NS = D.querySelectorAll('.show_npopalert'),
	NQ = D.querySelectorAll('.show_qpopalert'),
	NY = D.querySelector('#alert-npopup'),
	NG = D.querySelector('#alert-qpopup'),
	NO = D.querySelector('#alert-qualifications'),
	NN = D.querySelector('#alert-notes'),
	NT = D.querySelector('#this-note'),
	NB = D.querySelector('#request-qualification'),
	NX = D.querySelector('#link-qualification'),
	NK = D.querySelector('#container-parameters'),
	NP = D.querySelector('#periods'),
	NC = D.querySelector('#text-qualification'),
    NA = function(){
        var self = this,
            note_id = self.getAttribute('data-id'),
            pos = self.getAttribute('data-pos');
        <?php if($TEMP['#student'] == false){ ?>self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');<?php } ?>
        Req('{$url->{req/rol-{#role}/get-citems}}', function(e){
            console.log(e);
            if(e.status == 200){
                for(var j = 0, i = e.items['parameters'].length; j < i; j++){
                    var el = e.items['parameters'][j],
                        element = D.createElement('div');
                    element.className = 'group-validate display-block position-relative w-100 padding-25 border-all border-blue margin-b20', element.id = "parameter_"+j, element.innerHTML = '<h3 class="text-center" id="text-parameter">'+el['name']+'</h3><div class="display-flex"><div class="margin-auto margin-b15 margin-t15 padding-r10"><input id="param_note_'+j+'" type="text" class="cont-input h-50 border-radius-12 animated-easy border-focus-blue background-grely color-black"<?php echo($TEMP["#student"] == true) ? ' readonly="true" ' : ' ';?>placeholder="{$word->note}" '+(e.items['notes'][j] != 0 && e.items['notes'][j] != undefined ? 'value="'+e.items['notes'][j]+'"' : '')+'/></div><div class="position-relative margin-auto margin-b15 margin-t15 percent-gadget percent-gadget-disabled"><input type="text" readonly="true" class="cont-input mw-w-100 h-50 border-radius-12 animated-easy border-focus-blue margin-left-auto background-grely color-black text-center" placeholder="{$word->percentage}" value="'+el['percent']+'"/></div></div><div class="text-error color-red text-center font-low margin-t5"></div>', NK.appendChild(element);
                }
                NN.style.display = "block", D.body.style.overflow = "hidden"<?php if($TEMP['#student'] == false){ ?><?php echo($TEMP['#note_mode'] == '30-30-40') ? ", NT.setAttribute('data-pos', pos)" : "";?>, NT.setAttribute('data-id', note_id), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');<?php } ?>
            } else {
                loadAlert(e.error, 1), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
            }
        }, "POST", "&type=notes&id=" + note_id + "&pos=" + pos + "&period_id=<?php echo(count($TEMP['#periods']) > 1) ? '" + NP.value' : '{#period_id}"';?>)
    },
    GW = function(){
    	NY.style.display = "block", D.body.style.overflow = "hidden";
    },
    NH = function(){
    	NG.style.display = "block", D.body.style.overflow = "hidden";
    },
    ND = function(){
    	var self = this,
    		note_id = self.getAttribute('data-id');
    	self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');
	    Req('{$url->{req/rol-student/get-settings}}', function(e){
	    	console.log(e);
	        if(e.status == 200){
	        	if(e.cell == null){
	        		NC.innerText = 'Primero tiene que llenar la informacion de contacto necesaria.', removeClass(NX, 'hidden'), addClass(NB, 'hidden');
	        	} else {
	        		NC.innerText = 'Toda su informacion será enviada y luego nos pondremos en contacto con usted mendiante esta misma.', addClass(NX, 'hidden'), removeClass(NB, 'hidden');
	        	}
	            NO.style.display = "block", D.body.style.overflow = "hidden", NB.setAttribute('data-id', note_id), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
	        } else {
	        	loadAlert(e.error, 1), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
	    	}
	    }, "POST", "&id={$me->id}&note_id=" + note_id)
    },
	keyword = "{#keyword_notes}";
<?php if(count($TEMP['#programs']) > 1){ ?>
addEvent(D.querySelector('#programs'), 'change', function(){
    preloadPage('&one=notes&keyword={#keyword_notes}<?php echo($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) ? "&user={#user_id}" : "" ;?>&program='+this.value);
}), <?php } if(count($TEMP['#periods']) > 1){ ?>addEvent(NP, 'change', function(){
    preloadPage('&one=notes&keyword={#keyword_notes}<?php echo($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) ? "&user={#user_id}" : "" ;?>&program={#program_id}&period='+this.value);
})
<?php } ?>
addEvent(D.querySelector('#close-qpalert'), 'click', function(){
    NG.style.display = "", D.body.style.overflow = "";
}), addEvent(D.querySelector('#cancel-nalert'), 'click', function(){
    NN.style.display = "", D.body.style.overflow = "", NK.innerHTML = "";
}), addEvent(D.querySelector('#cancel-qalert'), 'click', function(){
    NO.style.display = "", D.body.style.overflow = "";
});
<?php if($TEMP['#admin'] == true || $TEMP['#academic'] == true || $TEMP['#teacher'] == true) { ?>
<?php if(!empty($TEMP['#notes'])){ ?>
addEvent(NT, 'click', function(){
    var self = this,
        GO = [],
        sum = 0,
        GC = NK.children;
    for (var j = 0, i = GC.length; j < i; j++){
        var el = D.querySelector('#param_note_'+j),
            GZ = D.querySelector('#parameter_'+j);
        if(el.value == '' || el.value > 5 || el.value < 0){
            addClass(el, 'border-red'), addClass(el, 'boxshadow-red');
            GZ.querySelector('.text-error').innerText = (el.value == '' ? '*{$word->this_field_is_empty}' : (el.value < 5 ? '{$word->please_enter_valid_value}' : '{$word->the_maximum_grade_is}')), timeDelay(function(){
                addClass(NN, 'efect-boom'), timeDelay(function(){
                    removeClass(NN, 'efect-boom')
                }, 200)
            }, 700);
            if(GC[GC.length-1] == GZ) return false;
        } else {
            removeClass(el, 'border-red'), removeClass(el, 'boxshadow-red'), GZ.querySelector('.text-error').innerText = "", GO.push(el.value);
        }
    }
    NT.setAttribute('disabled', true), addClass(NT, 'spinner-is-loading');
    Req('{$url->{req/rol-teacher/this-notes}}', function(e){
    	console.log(e);
        if(e.status == 200){
            NN.style.display = "", loadAlert("{$word->note_updated_successfully}"), preloadPage('{#url_params}');
        } else {
            if (e.errors != undefined) {
                for (var j = 0, i = e.errors.length; j < i; j++){
                    var el = D.querySelector('#'+e.errors[j]['class']+e.errors[j]['id']),
                        GH = D.querySelector('#parameter_'+e.errors[j]['id']);
                    addClass(el, 'border-red'), addClass(el, 'boxshadow-red'), GH.querySelector('.text-error').innerText = '*{$word->please_enter_valid_value}', timeDelay(function(){
                        addClass(NN, 'efect-boom'), timeDelay(function(){
                            removeClass(NN, 'efect-boom')
                        }, 200)
                    }, 700);
                }
            } else if(e.emptys != undefined){
                for (var j = 0, i = e.emptys.length; j < i; j++){
                    var el = D.querySelector('#'+e.emptys[j]['class']+e.emptys[j]['id']),
                        GZ = D.querySelector('#parameter_'+e.emptys[j]['id']);
                    GZ.querySelector('.text-error').innerText = '*{$word->this_field_is_empty}', addClass(el, 'border-red'), addClass(el, 'boxshadow-red'), timeDelay(function(){
                            addClass(NN, 'efect-boom'), timeDelay(function(){
                                removeClass(NN, 'efect-boom')
                            }, 200)
                        }, 700);
                }
            } else {
                loadAlert(e.error, 1)
            }
            NT.removeAttribute('disabled'), removeClass(NT, 'spinner-is-loading');
        }
    }, "POST", "&id=" + self.getAttribute('data-id') + "&params=" + JSON.stringify(GO)<?php echo($TEMP['#note_mode'] == '30-30-40') ? ' + "&pos=" + self.getAttribute("data-pos")' : '';?>)
}), <?php } ?>addEvent(D.querySelector('#search-users'), "keyup", function(e){
	let self = this,
		SV = self.value,
		SQ = self.parentNode,
		SD = D.querySelector('.search-down');
	if (SV == '') {
		addClass(SD, 'hidden');
		SD.innerHTML = "";
		return false;
	} else if(e.which != 13 || e.keyCode != 13){
		removeClass(SD, 'hidden');
	}
	addClass(SQ, 'spinner-is-loading'), keyword = SV;
	Req('{$url->{req/rol-teacher/search-users}}', function(e) {
		console.log(e);
	    if (e.status == 200) {
	   		removeClass(SQ, 'spinner-is-loading'), SD.innerHTML = e.html, loadPage(SD.querySelectorAll('a[target="_self"]'));
	    } else {
		    removeClass(SQ, 'spinner-is-loading'), addClass(SD, 'hidden'), SD.innerHTML = "";
		   	return false;
	    }
	}, "POST", "&typet=notes&keyword=" + SV);
}), addEvent(D.querySelector('#close-npalert'), 'click', function(){
    NY.style.display = "", D.body.style.overflow = "";
});
for(var j = 0, i = NS.length; j < i; j++) addEvent(NS[j], "click", GW);
for(var j = 0, i = NU.length; j < i; j++) addEvent(NU[j], "click", NA);	
<?php } else { ?>
addEvent(NB, 'click', function(){
    var self = this;
    NB.setAttribute('disabled', true), addClass(NB, 'spinner-is-loading');
    Req('{$url->{req/rol-student/request-qualifications}}', function(e){
    	console.log(e);
        if(e.status == 200){
            NO.style.display = "", loadAlert("¡Solicitud enviada con exito!"), preloadPage('{#url_params}');
        } else {
            loadAlert(e.error, 1), NB.removeAttribute('disabled'), removeClass(NB, 'spinner-is-loading');
        }
    }, "POST", "&id={$me->id}&period_id={#period_id}&note_id=" + self.getAttribute('data-id'))
});
for(var j = 0, i = NW.length; j < i; j++) addEvent(NW[j], 'input', function(){
    this.value = this.value.replace(/[^0-9]/gi, '');
});
for(var j = 0, i = NZ.length; j < i; j++) addEvent(NZ[j], "click", NA);
for(var j = 0, i = NR.length; j < i; j++) addEvent(NR[j], "click", ND);
<?php } ?>
for(var j = 0, i = NQ.length; j < i; j++) addEvent(NQ[j], "click", NH);
for(var j = 0, i = NF.length; j < i; j++) addEvent(NF[j], 'click', function(){
	var self = this,
		el = self.parentNode,
		NI = el.parentNode,
		NV = el.querySelector('input'),
		NE = NI.querySelector('.qualification_note'),
		NL = NI.querySelector('.upload_qualification');

	self.setAttribute('disabled', true), addClass(self, 'spinner-is-loading');
    Req('{$url->{req/rol-teacher/this-qualification}}', function(e){
    	console.log(e);
        if(e.status == 200){
            NL.innerText = e.note, addClass(NE, 'hidden'), removeClass(NL, 'hidden'), removeClass(NV, 'border-red'), removeClass(NV, 'boxshadow-red'), loadAlert("{$word->note_updated_successfully}"), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
        } else {
            if(e.empty != undefined){
                loadAlert('*{$word->this_field_is_empty}', 1)
            } else {
                loadAlert(e.error, 1)
            }
            addClass(NV, 'border-red'), addClass(NV, 'boxshadow-red'), self.removeAttribute('disabled'), removeClass(self, 'spinner-is-loading');
        }
    }, "POST", "&note_id=" + self.getAttribute('data-id') + "&period_id={#period_id}&note=" + NV.value)
});
for(var j = 0, i = NM.length; j < i; j++) doubleClick(NM[j], function(self){
	var el = self.parentNode,
		NL = el.querySelector('.qualification_note'),
		Nl = el.querySelector('a[target="_blank"]');
	removeClass(NL, 'hidden'), addClass(self, 'hidden'), addClass(Nl, 'hidden');
});
for(var j = 0, i = NJ.length; j < i; j++) addEvent(NJ[j], 'click', function(){
	var self = this.parentNode,
		el = self.parentNode,
		NL = el.querySelector('.upload_qualification'),
		Nl = el.querySelector('a[target="_blank"]');
	addClass(self, 'hidden'), removeClass(NL, 'hidden'), removeClass(Nl, 'hidden');
});
</script>